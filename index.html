<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>CarX Damper Calculator by SideSwipe and ChatGPT</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 0;
      padding: 0;
      background: #000;
      color: #fff;
    }
    .wrapper {
      display: flex;
      justify-content: center;
      align-items: center;
      flex-direction: row;
      min-height: 100vh;
    }
    .container {
      text-align: center;
      max-width: 700px;
      padding: 20px;
    }
    h2 {
      color: #ff4444;
      margin-bottom: 20px;
    }
    label {
      display: block;
      margin-top: 10px;
    }
    input {
      width: 100px;
      margin-right: 10px;
      padding: 5px;
      border-radius: 5px;
      border: none;
    }
    button {
      margin-top: 10px;
      padding: 8px 16px;
      border: none;
      background-color: #ff4444;
      color: #000;
      font-weight: bold;
      border-radius: 5px;
      cursor: pointer;
    }
    .form-group {
      margin-bottom: 10px;
    }
    .result {
      margin-top: 30px;
      display: flex;
      gap: 20px;
      flex-wrap: wrap;
      justify-content: center;
    }
    .card {
      background: #1a1a1a;
      padding: 15px 20px;
      border-radius: 10px;
      box-shadow: 0 2px 12px rgba(255, 68, 68, 0.3);
      width: 300px;
    }
    .card h3 {
      margin-top: 0;
      border-bottom: 1px solid #ff4444;
      padding-bottom: 5px;
      color: #ff4444;
    }
    .card p {
      margin: 8px 0;
    }
    .side-img {
      max-height: 23vh;
      object-fit: cover;
    }
    .menu {
      position: fixed;
      top: 20px;
      right: 20px;
      z-index: 1000;
    }
    .dropdown {
      position: relative;
      display: inline-block;
    }
    .dropdown-content {
      display: none;
      position: absolute;
      background-color: #1a1a1a;
      min-width: 160px;
      box-shadow: 0px 8px 16px rgba(0, 0, 0, 0.2);
      border-radius: 5px;
    }
    .dropdown-content a {
      color: #fff;
      padding: 10px 12px;
      text-decoration: none;
      display: block;
      cursor: pointer;
    }
    .dropdown-content a:hover {
      background-color: #ff4444;
    }
    .dropdown:hover .dropdown-content {
      display: block;
    }
    .dropdown-button {
      background-color: #ff4444;
      color: #000;
      padding: 10px;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      font-weight: bold;
    }
    .popup {
      display: none;
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      background-color: #1a1a1a;
      color: #fff;
      padding: 20px;
      border-radius: 10px;
      box-shadow: 0 0 20px rgba(255, 68, 68, 0.5);
      z-index: 2000;
    }
    .popup h3 {
      color: #ff4444;
    }
    .popup-close {
      margin-top: 15px;
      background-color: #ff4444;
      border: none;
      color: #000;
      padding: 8px 12px;
      border-radius: 5px;
      cursor: pointer;
    }
  </style>
</head>
<body>
  <div class="menu">
    <div class="dropdown">
      <button class="dropdown-button">Helpful Tips</button>
      <div class="dropdown-content">
        <a onclick="openPopup('Stiffness')">Stiffness</a>
        <a onclick="openPopup('Alignment')">Alignment</a>
        <a onclick="openPopup('Wheels')">Wheels</a>
        <a onclick="openPopup('Brakes')">Brakes</a>
        <a onclick="openPopup('Engine')">Engine</a>
        <a onclick="openPopup('Transmission')">Transmission</a>
      </div>
    </div>
  </div>

  <div class="wrapper">
    <img src="IMG_1341.jpg" class="side-img" alt="SideSwipe Car 1">

    <div class="container">
      <h2>CarX Damper Calculator by SideSwipe and ChatGPT</h2>
      <div class="form-group">
        <label>Suspended Mass (kg): <input type="number" id="mass" value="625"></label>
        <label>Front Spring Constant (kN/m): <input type="number" id="frontSpring" value="90"></label>
        <label>Rear Spring Constant (kN/m): <input type="number" id="rearSpring" value="85"></label>
        <button onclick="calculate()">Calculate</button>
      </div>
      <div class="result" id="results"></div>
    </div>

    <img src="image.jpg" class="side-img" alt="SideSwipe Car 2">
  </div>

  <div class="popup" id="tipPopup">
    <h3 id="popupTitle"></h3>
    <p id="popupContent">Open for suggestions</p>
    <button class="popup-close" onclick="closePopup()">Close</button>
  </div>

  <script>
    const tipContent = {
      Stiffness: "Setting spring stiffness of a car should be the first thing you do. Its the foundation of the tune. The stiffness must not be adjusted after you make any tuning adjustments to any other thing in the car. If you adjust stiffness, everything else will be affected. Changing the spring stiffness will affect a number of things: 1. Rear Camber when squatting, 2. Front Camber, 3. Damper Ratio Caluclations, 4. Sway Bar front and rear.If you find yourself taking too much angle, or having to stop the steering wheel from turning too far, or be timid/uncontrollable when catching angle, reduce front toe which should be negative. Increasing front roll bar can give you more grip in some cases. Try by 1 or two clicks at a time. Caster is a direct control of the weight of the wheel. It can be used to increase Force Feedback as well as transition speed. Front camber should be negative to preference, but if transition speed is slow, lowering front camber can speed it up directly, even better than caster can. Raising or going more negative in front camber can slow down transition speed and make the car more predictible. If you find yourself spinning alot when getting near or hitting full lock, your ackerman may be set wrong. The lower the setting of ackerman, the less potential there is for spinning, more front bite, and more angle. The higher the ackerman, the more responsive the car is and less angle the car can take. 100% ackerman is the most responsive, but can cause the driver to over shoot angle and tend to left foot brake, correct and e-brake to control car.",
      Alignment: "Camber, toe, and caster settings for grip and responsiveness. ",
      Wheels: "Wheel diameter, width, offset, and their effect on handling.",
      Brakes: "Brake bias, pad selection, and fluid tips.",
      Engine: "Powerband usage, tuning ideas, and throttle modulation.",
      Transmission: "Gear ratios, final drive, and shift timing tips."
    };

    function openPopup(title) {
      document.getElementById('popupTitle').textContent = title + " Tips";
      document.getElementById('popupContent').textContent = tipContent[title] || "Open for suggestions";
      document.getElementById('tipPopup').style.display = 'block';
    }

    function closePopup() {
      document.getElementById('tipPopup').style.display = 'none';
    }

    function calculate() {
      const mass = parseFloat(document.getElementById('mass').value);
      const frontSpring = parseFloat(document.getElementById('frontSpring').value) * 1000;
      const rearSpring = parseFloat(document.getElementById('rearSpring').value) * 1000;

      const bumpRatio = 0.7;
      const fastBumpRatio = 0.6;
      const reboundOffset = 1200;

      const cFrontBump = 2 * bumpRatio * Math.sqrt(frontSpring * mass);
      const cFrontRebound = cFrontBump - reboundOffset;
      const cFrontFastBump = 2 * fastBumpRatio * Math.sqrt(frontSpring * mass);
      const cFrontFastRebound = cFrontFastBump - reboundOffset;

      const cRearBump = 2 * bumpRatio * Math.sqrt(rearSpring * mass);
      const cRearRebound = cRearBump - reboundOffset;
      const cRearFastBump = 2 * fastBumpRatio * Math.sqrt(rearSpring * mass);
      const cRearFastRebound = cRearFastBump - reboundOffset;

      const html = `
        <div class="card">
          <h3>Front Dampers</h3>
          <p><strong>Bump:</strong> ${cFrontBump.toFixed(2)} Ns/m</p>
          <p><strong>Rebound:</strong> ${cFrontRebound.toFixed(2)} Ns/m</p>
          <p><strong>Fast Bump:</strong> ${cFrontFastBump.toFixed(2)} Ns/m</p>
          <p><strong>Fast Rebound:</strong> ${cFrontFastRebound.toFixed(2)} Ns/m</p>
        </div>
        <div class="card">
          <h3>Rear Dampers</h3>
          <p><strong>Bump:</strong> ${cRearBump.toFixed(2)} Ns/m</p>
          <p><strong>Rebound:</strong> ${cRearRebound.toFixed(2)} Ns/m</p>
          <p><strong>Fast Bump:</strong> ${cRearFastBump.toFixed(2)} Ns/m</p>
          <p><strong>Fast Rebound:</strong> ${cRearFastRebound.toFixed(2)} Ns/m</p>
        </div>
      `;

      document.getElementById('results').innerHTML = html;
    }

    document.addEventListener('keydown', function(event) {
      if (event.key === 'Enter') {
        calculate();
      }
    });
  </script>
</body>
</html>
